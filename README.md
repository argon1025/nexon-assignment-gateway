# ğŸ›°ï¸ Gateway
ëª¨ë“  API ìš”ì²­ì˜ ì¸ì¦, ë¼ìš°íŒ…ì„ ë‹´ë‹¹í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

## ğŸ“¦ í”„ë¡œì íŠ¸ êµ¬ì„±
ê¸°ë³¸ì ì¸ êµ¬ì„±ì€ MSA ê³µí†µ ì»¨ë²¤ì…˜ì„ ì¤€ìˆ˜í•˜ëŠ” [nexon-assignment-nestjs-temp](https://github.com/argon1025/nexon-assignment-nestjs-temp)ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

### ğŸ—‚ í´ë” êµ¬ì¡°
```
ğŸ“¦src
 â”£ ğŸ“‚api                                      (API ì—°ë™ ëª¨ë“ˆ)
 â”ƒ â”£ ğŸ“‚auth                                    (Auth ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ì˜ HTTP í†µì‹  í´ë¼ì´ì–¸íŠ¸)
 â”ƒ â”— ğŸ“‚event                                   (Event ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì™€ì˜ HTTP í†µì‹  í´ë¼ì´ì–¸íŠ¸)
 â”£ ğŸ“‚common                                   (ê³µí†µ ìœ í‹¸, ë°ì½”ë ˆì´í„°, ìƒìˆ˜ ë“±)
 â”ƒ â”£ ğŸ“‚decorator                                (ì»¤ìŠ¤í…€ ë°ì½”ë ˆì´í„° ëª¨ìŒ)
 â”ƒ â”ƒ â”£ ğŸ“œpublic.decorator.ts                      (`@Public()` ì¸ì¦ ì œì™¸ ì²˜ë¦¬ìš© ë°ì½”ë ˆì´í„°)
 â”ƒ â”ƒ â”£ ğŸ“œrole.decorator.ts                        (`@Roles()` ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ìš© ë°ì½”ë ˆì´í„°)
 â”ƒ â”ƒ â”— ğŸ“œuser.decorator.ts                        (`@User()` í† í°ì—ì„œ ìœ ì € ì •ë³´ ì¶”ì¶œìš© ë°ì½”ë ˆì´í„°)
 â”£ ğŸ“‚auth                                     (ì¸ì¦ ê´€ë ¨ ëª¨ë“ˆ: JWT ì „ëµ, ê°€ë“œ)
 â”ƒ â”£ ğŸ“‚guard                                    (ì¸ì¦/ì¸ê°€ìš© Passport Guard ëª¨ë“ˆ)
 â”ƒ â”ƒ â”£ ğŸ“œjwt-auth.guard.ts                        (JWT ì¸ê°€ Guard)
 â”ƒ â”ƒ â”— ğŸ“œroles.guard.ts                           (ì—­í• (Role) ê¸°ë°˜ ì¸ê°€ Guard)
 â”ƒ â”£ ğŸ“‚strategy                                 (Passport JWT ì „ëµ ëª¨ë“ˆ)
 â”ƒ â”ƒ â”— ğŸ“œjwt.strategy.ts                          (JWT íŒŒì‹± ë° ê²€ì¦ ì „ëµ)
 â”£ ğŸ“‚event                                    (ì´ë²¤íŠ¸ ê´€ë ¨ ë¼ìš°íŒ…/ì»¨íŠ¸ë¡¤ëŸ¬ ë ˆì´ì–´)
 â”ƒ â”£ ğŸ“‚admin                                    (ê´€ë¦¬ììš© API)
 â”ƒ â”£ ğŸ“‚internal                                 (ì‚¬ìš©ììš© API)
 â”£ ğŸ“‚user                                     (ìœ ì € ê´€ë ¨ ë¼ìš°íŒ…/ì»¨íŠ¸ë¡¤ëŸ¬ ë ˆì´ì–´)
 â”ƒ â”£ ğŸ“‚admin                                    (ê´€ë¦¬ììš© API)
 â”ƒ â”£ ğŸ“‚internal                                 (ì‚¬ìš©ììš© API)
 â”— ğŸ“œmain.ts
```

### ğŸ§  ì„¤ê³„ ë°°ê²½
#### JWT, ì—­í•  ê¸°ë°˜ ì¸ì¦
- Auth ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ì—ì„œ ë°œê¸‰í•œ JWT í† í°ì„ Gatewayì—ì„œ ë³µí˜¸í™”í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
- ì „ì—­ `JwtAuthGuard`ë¥¼ í†µí•´ ì¸ì¦ì„ ì²˜ë¦¬í•˜ë©°, `@Public()` ë°ì½”ë ˆì´í„°ë¡œ ì¸ì¦ ì œì™¸ APIë¥¼ ëª…ì‹œì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.
- `@Roles()` ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•´ ì—­í• (USER, OPERATOR, AUDITOR, ADMIN)ì— ë”°ë¼ API ì ‘ê·¼ ê¶Œí•œì„ ì œì–´í•©ë‹ˆë‹¤.
- `@User()` ë°ì½”ë ˆì´í„°ë¥¼ í†µí•´ ì¸ì¦ëœ ì‚¬ìš©ì ì •ë³´ë¥¼ ê°„í¸í•˜ê²Œ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
#### API ì—°ë™ ë° ë³„ë„ ë ˆì´ì–´ ë¶„ë¦¬
- `api/` ë””ë ‰í† ë¦¬ì—ì„œ ì„œë¹„ìŠ¤ë³„ ì™¸ë¶€ API í˜¸ì¶œì„ ëª¨ë“ˆí™”í–ˆìŠµë‹ˆë‹¤.
- í˜¸ì¶œ ì‹¤íŒ¨ ì‹œ ê³µí†µ ì˜ˆì™¸ í¬ë§·ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì „ë‹¬í•¨ìœ¼ë¡œì¨, ì¼ê´€ì„± ìˆê²Œ ì—ëŸ¬ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

## ğŸš€ ë¡œì»¬ ì‹¤í–‰ ê°€ì´ë“œ
ì´ í”„ë¡œì íŠ¸ëŠ” Docker ê¸°ë°˜ìœ¼ë¡œë„ ì‹¤í–‰í•  ìˆ˜ ìˆì§€ë§Œ,
GatewayëŠ” ë‹¨ì¼ ì¸ìŠ¤í„´ìŠ¤ë¡œ ë™ì‘í•˜ë©°, ì™¸ë¶€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤(`Auth`, `Event`)ì— ì—°ê²°í•´ì•¼ í•˜ë¯€ë¡œ ë¡œì»¬ ì§ì ‘ ì‹¤í–‰ì„ ê¶Œì¥í•©ë‹ˆë‹¤.

ì „ì²´ MSA í™˜ê²½ì„ í†µí•© ì‹¤í–‰í•˜ê³ ì í•  ê²½ìš°ì—ëŠ” [Event Reward System](https://github.com/argon1025/nexon-assignment) ì €ì¥ì†Œì˜ í†µí•© ì‹¤í–‰ ê°€ì´ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

### 1. ë…¸ë“œ ë²„ì „ í™•ì¸ ë° ì„¤ì¹˜

```bash
$ cat .nvmrc
$ fnm use
```

### 2. pnpm íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
$ corepack enable
```

> pnpm ë²„ì „ì˜ ê²½ìš° package.json > packageManager ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.

### 4. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
pnpm install
```

### 5. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
pnpm run start:local
```
